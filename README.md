# SafeGain - 安全增重健康管理 H5 应用

## 项目简介

SafeGain 是一款专为特殊健康状况用户设计的健康管理 H5 应用，特别适合患有轻微肺气肿和巴雷特食管的人群进行安全增重。应用通过 AI 视觉识别技术分析食物，提供个性化的饮食建议，并记录安全的运动训练。

## 核心功能

### 🍽️ 饮食管理
- **AI 拍照分析**: 使用火山引擎视觉大模型分析食物图片
- **风险评估**: 自动检测高油、辛辣、高酸、难消化食物
- **胃部状态追踪**: 记录饭后感受（舒适/胀气/反酸）
- **智能提醒**: 反酸时自动提示垫高枕头睡觉

### 💪 运动管理
- **安全动作库**: 仅提供适合特殊状况的运动
  - 上斜哑铃卧推（防反流）
  - 坐姿推举（有靠背）
  - 高脚杯深蹲（低腹压）
- **呼吸安全提示**: 常驻提醒"发力呼气，还原吸气，禁止憋气"

### 📊 数据统计
- **体重追踪**: 记录和展示体重变化趋势
- **胃部感受统计**: 可视化展示胃部感受变化

## 技术特点

### 🛠️ 技术栈
- **前端**: HTML5, CSS3, JavaScript (ES6+)
- **数据库**: Dexie.js (IndexedDB 封装库)
- **图片处理**: browser-image-compression
- **图表展示**: Chart.js
- **AI 分析**: 火山引擎视觉大模型 (Doubao-Seed-1.6-flash)

### 🔧 技术亮点
- **响应式设计**: 完美适配手机端
- **离线存储**: 使用 Dexie.js 实现本地数据持久化
- **图片压缩**: 自动压缩图片至 1024px 以下
- **持久化权限**: 请求浏览器持久化存储权限

## 安装与使用

### 📱 直接使用
1. 将 `health-app` 文件夹部署到 Web 服务器
2. 通过手机浏览器访问应用
3. 允许相机权限（用于拍照功能）

### 🔧 本地开发
```bash
# 克隆或下载项目
# 进入项目目录
cd health-app

# 使用任意 HTTP 服务器启动（推荐使用 Live Server）
# 如果使用 Python 3
python -m http.server 8000

# 如果使用 Node.js
npx serve .

# 然后在浏览器中访问 http://localhost:8000
```

## 使用指南

### 🍽️ 饮食记录流程
1. 点击"拍照分析食物"按钮
2. 拍照或选择食物图片
3. 等待 AI 分析完成
4. 查看分析结果和风险提示
5. 选择胃部感受状态
6. 保存记录

### 💪 运动记录流程
1. 切换到"运动管理"标签
2. 选择安全的运动类型
3. 填写组数、次数、重量
4. 记录运动时间和感受
5. 保存记录

### 📊 数据查看
1. 切换到"数据统计"标签
2. 记录当前体重
3. 查看体重变化趋势图
4. 查看胃部感受统计图

## API 配置

应用使用火山引擎 API 进行图片分析，相关配置已在 `app.js` 中设置：

```javascript
const apiKey = '13d34bf3-0577-46db-9acd-182a9e42cfb7';
const endpointId = 'ep-m-20251127224930-2lsqb';
```

## 数据存储

应用使用 Dexie.js 在浏览器本地存储数据，包括：
- 饮食记录（包含图片和分析结果）
- 运动记录
- 体重记录

数据存储在浏览器的 IndexedDB 中，支持离线访问。

## 浏览器兼容性

- ✅ Chrome 60+
- ✅ Firefox 55+
- ✅ Safari 11+
- ✅ Edge 79+
- ✅ 移动端浏览器

## 注意事项

1. **网络要求**: AI 分析功能需要网络连接
2. **权限要求**: 需要相机权限用于拍照功能
3. **存储空间**: 图片和数据会占用本地存储空间
4. **安全提示**: 严格按照应用提示进行运动，避免危险动作

## 开发说明

### 项目结构
```
health-app/
├── index.html          # 主页面
├── styles.css          # 样式文件
├── app.js              # 主应用逻辑
└── README.md           # 说明文档
```

### 主要功能模块
- `initializeApp()`: 应用初始化
- `analyzeImage()`: AI 图片分析
- `saveMealRecord()`: 保存饮食记录
- `saveWorkoutRecord()`: 保存运动记录
- `updateCharts()`: 更新数据图表

## 版本信息

- **版本**: v1.0 (MVP)
- **状态**: 开发完成/测试中
- **适用人群**: 28岁男性，BMI 19.2（偏瘦），患有轻微肺气肿和巴雷特食管

## 许可证

本项目仅供学习和研究使用。